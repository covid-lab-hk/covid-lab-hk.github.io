(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(3678)}])},3678:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return b},default:function(){return m}});var r=n(4051),a=n.n(r),i=n(5893),s=n(7294),c=n(9008),o=(n(5675),n(3671)),u=n.n(o),l=n(9669),d=n.n(l);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t,n,r,a,i,s){try{var c=e[i](s),o=c.value}catch(u){return void n(u)}c.done?t(o):Promise.resolve(o).then(r,a)}function h(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e){var t={"\u5730\u5340":"district","\u5927\u5ec8\u540d\u55ae":"building_name","\u500b\u6848\u6700\u5f8c\u5230\u8a2a\u65e5\u671f":"last_date_of_visit","\u76f8\u95dc\u500b\u6848\u7de8\u865f":"related_cases",District:"district","Building name":"building_name","Last date of visit of the case(s)":"last_date_of_visit","Related cases":"related_cases"};return e.map((function(e){var n={};return Object.keys(e).forEach((function(r){n[t[r]]=e[r]})),n}))}var b=!0;function m(e){var t=function(e){var t=e.data;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("h2",{children:["\u7e3d\u5171",t.length,"\u7b46\u7d50\u679c"]}),(0,i.jsx)("div",{className:"grid grid-cols-1 gap-2 p-5",children:t.map((function(e,t){return(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("div",{className:"bg-green-100 text-green-500 text-lg font-bold text-center p-14 rounded-lg",children:e.district}),(0,i.jsx)("div",{className:"bg-green-100 text-green-500 text-lg font-bold text-center p-14 rounded-lg",children:e.building_name})]},t)}))})]})},n=function(e){var t=e.data;return(0,i.jsx)("div",{children:t.map((function(e,t){return(0,i.jsxs)("button",{type:"button",onClick:function(){L(e.text)},className:"".concat(y==e.text?"bg-purple-300":"bg-gradient-to-r"," ring-purple-300 text-white  from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"),children:[e.text,(0,i.jsx)("span",{className:"bg-green-100 text-green-800 text-sm font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-green-200 dark:text-green-900",children:e.count})]},t)}))})},r=(0,s.useState)(e.curr_time),o=r[0],l=r[1],f=(0,s.useState)(x(h(e.chi_csv).concat(h(e.eng_csv)))),b=f[0],m=f[1],p=(0,s.useState)([]),v=p[0],_=p[1],j=(0,s.useState)(""),y=j[0],w=j[1];(0,s.useEffect)((function(){d().get("/api/chp-gov-hk/14-days-covid-buildings").then((function(e){if(200==e.status){l(e.data.curr_time);var t=h(e.data.chi_csv).concat(h(e.data.eng_csv));m(t);var n={};t.forEach((function(e){e.district in n?n[e.district]+=1:n[e.district]=1})),_(Object.entries(n).map((function(e){return{text:e[0],count:e[1]}})))}}))}),[]);!function(){var e,t=(e=a().mark((function e(){var t,n,r,i,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d().get("/api/chp-gov-hk-files/building_list_chi.csv",{responseType:"blob"});case 2:if(t=e.sent,n=t.data,r={},e.prev=5,console.log(n),!n){e.next=12;break}return i=n,e.next=11,u()().fromString(i);case 11:r=e.sent;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),console.log(e.t0);case 17:return e.next=19,d().get("/api/chp-gov-hk-files/building_list_eng.csv",{responseType:"blob"});case 19:if(t=e.sent,n=t.data,s={},e.prev=22,!n){e.next=28;break}return c=t.data,e.next=27,u()().fromString(c);case 27:s=e.sent;case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(22),console.log(e.t1);case 33:m(x(h(r).concat(h(s))));case 34:case"end":return e.stop()}}),e,null,[[5,14],[22,30]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){g(i,r,a,s,c,"next",e)}function c(e){g(i,r,a,s,c,"throw",e)}s(void 0)}))})}();var k=(0,s.useState)(""),N=k[0],S=k[1],C=(0,s.useState)([]),E=C[0],A=C[1],L=function(e){var t=b.filter((function(t){return t.district.toLowerCase().includes(e.toLowerCase())}));S(""),A(t),w(e)};return(0,i.jsxs)("div",{className:"overflow-auto bg-slate-900 min-h-screen",children:[(0,i.jsxs)(c.default,{children:[(0,i.jsx)("title",{children:"Covid Lab HK"}),(0,i.jsx)("meta",{name:"description",content:"\u904e\u53bb 14 \u5929\u5167\u6709\u56b4\u91cd\u6025\u6027\u547c\u5438\u7d9c\u5408\u75c7\u51a0\u72c0\u75c5\u6bd2 2 \u7684\u967d\u6027\u6aa2\u6e2c\u500b\u6848\u66fe\u5c45\u4f4f\u7684\u4f4f\u5b85\u5927\u5ec8\u540d\u55ae\u641c\u5c0b\u5650"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsx)("main",{className:"container mx-auto",children:(0,i.jsxs)("div",{className:" flex flex-col justify-center align-items-center text-white",children:[(0,i.jsx)("h3",{children:"\u904e\u53bb 14 \u5929\u5167\u6709\u56b4\u91cd\u6025\u6027\u547c\u5438\u7d9c\u5408\u75c7\u51a0\u72c0\u75c5\u6bd2 2 \u7684\u967d\u6027\u6aa2\u6e2c\u500b\u6848\u66fe\u5c45\u4f4f\u7684\u4f4f\u5b85\u5927\u5ec8\u540d\u55ae\u641c\u5c0b\u5650"}),(0,i.jsxs)("h2",{children:["\u6700\u5f8c\u66f4\u65b0\u6642\u9593 \uff1a ",o," "]}),(0,i.jsxs)("div",{className:"flex flex-col justify-center align-items-center",children:[(0,i.jsx)(n,{data:v}),(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)("input",{type:"text",value:N,onChange:function(e){var t=e.target.value.toLowerCase();S(t)},className:" rounded-lg border-transparent appearance-none border border-gray-300 py-2 px-4 bg-white text-gray-700 placeholder-gray-400 shadow-sm text-base focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent",placeholder:"Search"}),(0,i.jsx)("button",{type:"button",onClick:function(){!function(){var e=N;if(!e||""==e.trim())return(0,i.jsx)(i.Fragment,{});w("");var t=b.filter((function(t){return t.building_name.toLowerCase().includes(e)}));A(t)}()},className:"text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800 shadow-lg shadow-blue-500/50 dark:shadow-lg dark:shadow-blue-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2 ",children:"Search"})]}),(0,i.jsx)(t,{data:E})]})]})})]})}}},function(e){e.O(0,[808,890,774,888,179],(function(){return t=8581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);